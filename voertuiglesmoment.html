<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chauffeur Oefenmomenten ‚Äî Brandweer Herentals</title>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background:#f2f4f7;
}

.container {
  max-width:900px;
  margin:0 auto 20px auto;
  background:#fff;
  border-radius:15px;
  box-shadow:0 6px 15px rgba(0,0,0,0.1);
  padding:0 20px 20px 20px;
}

/* VOLLEDIGE RODE HEADER */
header#appHeader {
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#c62828;
  color:white;
  margin:-20px -20px 0 -20px;
  padding:15px 20px;
  border-radius:15px 15px 0 0;
}

.header-left, .header-right {
  display:flex;
  align-items:center;
}

.header-logo {
  height:50px;
}

.header-greeting {
  margin-left:10px;
  font-weight: bold;
  color: white;
}

/* SPATIE ONDER HEADER */
main {
  margin-top: 15px;
}

.backlink {
  text-decoration:none;
  font-weight:600;
  display:inline-block;
  margin:15px 0 20px 0;
  color:white;
  background:#c62828;
  padding:6px 12px;
  border-radius:8px;
}

#searchInput {
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:1rem;
  margin-bottom:20px;
  width:100%;
}

.chauffeur-card {
  background:#f9f9f9;
  padding:15px;
  border-radius:12px;
  margin-bottom:20px;
  border-left:6px solid #c62828;
}

.chauffeur-card h3 {
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.counter {
  font-size:0.9rem;
  color:#555;
}

.vehicle {
  margin-top:10px;
  padding:10px;
  border:1px solid #eee;
  border-radius:12px;
  background:#fff;
}

.veh-header {
  font-weight:bold;
  margin-bottom:8px;
}

.exercise-list label {
  display:block;
  margin-bottom:4px;
}
</style>
</head>
<body>

<div class="container">

<header id="appHeader">
  <div class="header-left">
    <img src="/brandweerherentals/icons/logo.png" alt="Brandweer Herentals" class="header-logo">
  </div>
  <div class="header-right">
    <div id="greeting" class="header-greeting"></div>
  </div>
</header>

<main>
  <a href="index.html" class="backlink">‚Üê Terug naar menu</a>
  <input type="text" id="searchInput" placeholder="Zoek op naam...">
  <div id="chauffeurContainer"></div>
</main>

</div>

<script>
// ===================== LOGIN =====================
let loggedInUser = localStorage.getItem("userName");

if(!loggedInUser || loggedInUser.trim() === ""){
  loggedInUser = prompt("Geef je naam in (exact zoals geregistreerd):");
  if(loggedInUser){
    localStorage.setItem("userName", loggedInUser);
  }
}

// ===================== ADMINS =====================
const admins = [
  "Patrick Van Hove",
  "Alain Leemans",
  "Jonas Weckhuysen",
  "Danny Van Den Bergh"
];

const isAdmin = admins.includes(loggedInUser);

// ===================== CHAUFFEURS (alfabetisch op achternaam) =====================
const chauffeurs = [
  "Dries Boven",
  "Robin Buyens",
  "Bart Cools",
  "Kurt Cools",
  "Gianni Cornelis",
  "Roel Dekort",
  "Rik Goris",
  "Kris Hoeylaerts",
  "Philippe Hoeylaerts",
  "Vincent Leemans",
  "Bart Leten",
  "Steven Maes",
  "Liese Meyskens",
  "Rutger Moons",
  "Sven Van Buren",
  "Jakke Van den Broeck",
  "Kris Van Looveren",
  "No√´l Van Roy",
  "Joris Van Vracem",
  "Cristoph Verhaegen",
  "Robbe Vervecken",
  "Steven Vervloet"
];

// ===================== OEFENMOMENTEN =====================
const oefenmomenten = {
  "B541":[1,2,3,4,5,6],
  "L544":[1,2,3,4],
  "L549":[1,2,3,4,5],
  "A545":[1,2,3,4,5,6],
  "D541":[1,2,3],
  "M545":[1,2,3,4],
  "T545":[1,2,3,4,5,6],
  "H541":[1,2,3,4,5,6],
  "A541":[1,2,3,4,5,6],
  "Containers":[1]
};

// ===================== GROEPEN =====================
const mid = Math.ceil(chauffeurs.length/2);
const groep1 = chauffeurs.slice(0,mid);
const groep2 = chauffeurs.slice(mid);

const voorjaarSetA = ["B541","L544","L549","A545","D541","M545"];
const najaarSetA   = ["T545","H541","A541","Containers"];

const voorjaarSetB = najaarSetA;
const najaarSetB   = voorjaarSetA;

const today = new Date();
const month = today.getMonth() + 1;
const isVoorjaar = month <= 6;
const evenYear = today.getFullYear() % 2 === 0;

function getVoertuigenVoorChauffeur(chauffeur){

  const inGroep1 = groep1.includes(chauffeur);

  if(inGroep1){
    return isVoorjaar
      ? (evenYear ? voorjaarSetB : najaarSetB)
      : (evenYear ? najaarSetB : voorjaarSetB);
  } else {
    return isVoorjaar
      ? (evenYear ? voorjaarSetA : najaarSetA)
      : (evenYear ? najaarSetA : voorjaarSetA);
  }
}

// ===================== RENDER =====================
const container = document.getElementById("chauffeurContainer");

function renderChauffeurs(filter=""){

  container.innerHTML = "";
  filter = filter.toLowerCase();

  chauffeurs.forEach(chauffeur => {

    // Alleen jezelf zien, behalve als admin
    if(!isAdmin && chauffeur !== loggedInUser) return;

    // Zoeken op naam
    if(filter && !chauffeur.toLowerCase().includes(filter)) return;

    const voertuigen = getVoertuigenVoorChauffeur(chauffeur);

    const card = document.createElement("div");
    card.className = "chauffeur-card";

    const counter = document.createElement("span");
    counter.className = "counter";

    const title = document.createElement("h3");
    title.appendChild(document.createTextNode(chauffeur));
    title.appendChild(counter);
    card.appendChild(title);

    let totaal = 0;

    voertuigen.forEach(voertuig => {

      const voertuigDiv = document.createElement("div");
      voertuigDiv.className = "vehicle";

      const header = document.createElement("div");
      header.className = "veh-header";
      header.textContent = "üöí " + voertuig;
      voertuigDiv.appendChild(header);

      const list = document.createElement("div");
      list.className = "exercise-list";

      oefenmomenten[voertuig].forEach(num => {
        totaal++;

        const label = document.createElement("label");
        const cb = document.createElement("input");
        cb.type = "checkbox";

        cb.addEventListener("change", updateCounter);

        label.appendChild(cb);
        label.appendChild(document.createTextNode(" Oefenmoment " + num));
        list.appendChild(label);
      });

      voertuigDiv.appendChild(list);
      card.appendChild(voertuigDiv);
    });

    function updateCounter(){
      const done = card.querySelectorAll(".exercise-list input:checked").length;
      counter.textContent = ` ${done} / ${totaal} voltooid`;
    }

    container.appendChild(card);
  });

  if(container.innerHTML.trim() === ""){
    container.innerHTML = "<p style='color:#999;'>Geen chauffeurs gevonden‚Ä¶</p>";
  }
}

// ===================== EVENTS =====================
renderChauffeurs();

document.getElementById("searchInput").addEventListener("input", e => {
  renderChauffeurs(e.target.value);
});

document.getElementById("greeting").textContent = 
  isAdmin ? `Admin: ${loggedInUser}` : `Welkom ${loggedInUser}`;
</script>

</body>
</html>
