<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chauffeur Oefenmomenten ‚Äî Brandweer Herentals</title>

<style>
body { margin:0; font-family: Arial, sans-serif; background:#f2f4f7; }
.container { max-width:900px; margin:0 auto 20px auto; background:#fff; border-radius:15px; box-shadow:0 6px 15px rgba(0,0,0,0.1); padding:0 20px 20px 20px; }
header#appHeader { display:flex; justify-content:space-between; align-items:center; background:#c62828; color:white; margin:-20px -20px 0 -20px; padding:15px 20px; border-radius:15px 15px 0 0; }
.header-left, .header-right { display:flex; align-items:center; }
.header-logo { height:50px; }
.header-greeting, .header-datetime, .header-ploeg { margin-left:10px; font-weight:bold; color:white; }
.backlink { text-decoration:none; font-weight:600; display:inline-block; margin:25px 0 20px 0; color:white; background:#c62828; padding:6px 12px; border-radius:8px; }
#searchInput { padding:10px 12px; border-radius:10px; border:1px solid #ccc; font-size:1rem; margin-bottom:20px; width:100%; }
.chauffeur-card { background:#f9f9f9; padding:15px; border-radius:12px; margin-bottom:20px; border-left:6px solid #c62828; }
.chauffeur-card h3 { display:flex; justify-content:space-between; align-items:center; }
.counter { font-size:0.9rem; color:#555; }
.vehicle { margin-top:10px; padding:10px; border:1px solid #eee; border-radius:12px; background:#fff; }
.veh-header { font-weight:bold; margin-bottom:8px; display:flex; align-items:center; }
.veh-header label { margin-right:8px; font-weight:bold; }
.exercise-list label { display:block; margin-bottom:4px; }
</style>
</head>

<body>

<div class="container">

<header id="appHeader">
  <div class="header-left">
    <img src="/brandweerherentals/icons/logo.png" alt="Brandweer Herentals" class="header-logo">
  </div>
  <div class="header-right">
    <div id="greeting" class="header-greeting"></div>
    <div id="datetime" class="header-datetime"></div>
    <div id="ploegOfWeek" class="header-ploeg"></div>
  </div>
</header>

<main>
  <a href="index.html" class="backlink">‚Üê Terug naar menu</a>
  <input type="text" id="searchInput" placeholder="Zoek op naam...">
  <div id="chauffeurContainer"></div>
</main>

</div>

<script>
/* ========== GEBRUIKER UIT LOCALSTORAGE ========== */
const huidigeGebruiker = localStorage.getItem("userName") || "Onbekend";
document.getElementById("greeting").textContent = `Welkom ${huidigeGebruiker}`;

/* ========== ADMINS ========== */
const admins = ["Patrick Van Hove","Alain Leemans","Jonas Weckhuysen","Danny Van Den Bergh"];
const isAdmin = admins.includes(huidigeGebruiker);

/* ========== CHAUFFEURS ========== */
const chauffeurs = [
  "Dries Boven", "Robin Buyens", "Bart Cools", "Kurt Cools", "Gianni Cornelis",
  "Roel Dekort", "Rik Goris", "Kris Hoeylaerts", "Philippe Hoeylaerts", "Vincent Leemans",
  "Bart Leten", "Steven Maes", "Liese Meyskens", "Rutger Moons", "Sven Van Buren",
  "Jakke Van den Broeck", "Kris Van Looveren", "No√´l Van Roy", "Joris Van Vracem",
  "Cristoph Verhaegen", "Robbe Vervecken", "Steven Vervloet"
];

/* ========== OEFENMOMENTEN PER VOERTUIG ========== */
const oefenmomenten = {
  "B541":[1,2,3,4,5,6], "L544":[1,2,3,4], "L549":[1,2,3,4,5], "A545":[1,2,3,4,5,6],
  "D541":[1,2,3], "M545":[1,2,3,4], "T545":[1,2,3,4,5,6], "H541":[1,2,3,4,5,6],
  "A541":[1,2,3,4,5,6], "Containers":[1]
};

/* ========== GROEPEN & VOERTUIGEN ========== */
const mid = Math.ceil(chauffeurs.length/2);
const groep1 = chauffeurs.slice(0,mid);
const groep2 = chauffeurs.slice(mid);

const voorjaarSetA = ["B541","L544","L549","A545","D541","M545"];
const najaarSetA = ["T545","H541","A541","Containers"];
const voorjaarSetB = najaarSetA;
const najaarSetB = voorjaarSetA;

const maand = new Date().getMonth()+1;
const isVoorjaar = maand<=6;
const evenJaar = new Date().getFullYear()%2===0;

function getVoertuigenVoorChauffeur(chauffeur){
  return groep1.includes(chauffeur)
    ? (isVoorjaar ? (evenJaar ? voorjaarSetB : najaarSetB) : (evenJaar ? najaarSetB : voorjaarSetB))
    : (isVoorjaar ? (evenJaar ? voorjaarSetA : najaarSetA) : (evenJaar ? najaarSetA : voorjaarSetA));
}

/* ========== RENDER ========== */
const containerDiv = document.getElementById("chauffeurContainer");

function renderChauffeurs(filter=""){
  containerDiv.innerHTML="";
  filter = filter.toLowerCase();

  chauffeurs.forEach(chauffeur=>{
    if(!isAdmin && chauffeur!==huidigeGebruiker) return;
    if(filter && !chauffeur.toLowerCase().includes(filter)) return;

    const voertuigen = getVoertuigenVoorChauffeur(chauffeur);

    const card = document.createElement("div");
    card.className="chauffeur-card";

    const h3 = document.createElement("h3");
    h3.textContent = chauffeur + " ";
    const counter = document.createElement("span");
    counter.className="counter";
    counter.textContent = "0 / 0 oefenmomenten voltooid";
    h3.appendChild(counter);
    card.appendChild(h3);

    voertuigen.forEach(voertuig=>{
      if(!oefenmomenten[voertuig]) return;

      const vehicleDiv = document.createElement("div");
      vehicleDiv.className = "vehicle";

      const vehHeader = document.createElement("div");
      vehHeader.className = "veh-header";
      vehHeader.textContent = "üöí " + voertuig;
      vehicleDiv.appendChild(vehHeader);

      const exerciseDiv = document.createElement("div");
      exerciseDiv.className = "exercise-list";

      oefenmomenten[voertuig].forEach(num=>{
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type="checkbox";
        label.appendChild(input);
        label.appendChild(document.createTextNode(` Oefenmoment ${num}`));
        exerciseDiv.appendChild(label);
      });

      vehicleDiv.appendChild(exerciseDiv);
      card.appendChild(vehicleDiv);
    });

    containerDiv.appendChild(card);
  });

  if(!containerDiv.hasChildNodes()){
    containerDiv.innerHTML="<div style='color:#666;padding:12px;border-radius:8px;background:#fff;border:1px dashed #ddd;'>Geen chauffeurs gevonden of geen rechten.</div>";
  }
}

renderChauffeurs();
document.getElementById("searchInput").addEventListener("input",e=>renderChauffeurs(e.target.value));

</script>

</body>
</html>
