<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chauffeur Oefenmomenten ‚Äî Brandweer Herentals</title>
<link rel="stylesheet" href="style.css">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f2f4f7;
}

.container {
  max-width: 900px;
  margin: 0 auto 20px auto;
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.1);
  padding: 0 20px 20px 20px;
}

/* HEADER volledig rood en naadloos */
header#appHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #c62828;
  color: white;
  padding: 15px 20px;
  border-radius: 15px 15px 0 0;
}

.header-left, .header-right {
  display: flex;
  align-items: center;
}

.header-logo {
  height: 50px;
}

.header-greeting, .header-datetime, .header-ploeg {
  margin-left: 10px;
  font-weight: bold;
  color: white;
}

.backlink {
  text-decoration: none;
  font-weight: 600;
  display: inline-block;
  margin: 20px 0 20px 0;
  color: white;
  background: #c62828;
  padding: 6px 12px;
  border-radius: 8px;
}

#searchInput {
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 1rem;
  margin-bottom: 20px;
  width: 100%;
}

.chauffeur-card {
  background: #f9f9f9;
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 20px;
  border-left: 6px solid #c62828;
}

.chauffeur-card h3 {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.counter {
  font-size: 0.9rem;
  color: #555;
}

.vehicle {
  margin-top: 10px;
  padding: 10px;
  border: 1px solid #eee;
  border-radius: 12px;
  background: #fff;
}

.veh-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  margin-bottom: 8px;
}

.exercise-list label {
  display: block;
  margin-bottom: 4px;
}

.info-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  font-size: 1.1rem;
}

.modal {
  display: none; 
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background: #fff;
  margin: 10% auto;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 600px;
}

.close-modal {
  float: right;
  cursor: pointer;
  font-size: 1.2rem;
  font-weight: bold;
}

.call-btn {
  margin-top: 8px;
  padding: 8px 12px;
  border-radius: 8px;
  text-align: center;
  text-decoration: none;
  background: #c62828;
  color: white;
  font-weight: bold;
  display: inline-block;
}
.call-btn:hover {
  opacity: 0.9;
}
</style>
</head>
<body>

<div class="container">

  <!-- HEADER -->
  <header id="appHeader">
    <div class="header-left">
      <img src="/brandweerherentals/icons/logo.png" alt="Brandweer Herentals" class="header-logo">
    </div>
    <div class="header-right">
      <div id="greeting" class="header-greeting"></div>
      <div id="datetime" class="header-datetime"></div>
      <div id="ploegOfWeek" class="header-ploeg"></div>
    </div>
  </header>

  <main>
    <a href="index.html" class="backlink">‚Üê Terug naar menu</a>
    <input type="text" id="searchInput" placeholder="Zoek op naam...">
    <div id="chauffeurContainer"></div>
  </main>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">‚úñ</span>
      <div id="modalText"></div>
    </div>
  </div>

</div>

<script>
const chauffeurs = {
  "Dries Boven": ["B541","L544","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Robin Buyens": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Bart Cools": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Kurt Cools": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Gianni Cornelis": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Roel Dekort": ["B541","L544","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Rik Goris": ["B541","L544","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Kris Hoeylaerts": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Philippe Hoeylaerts": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Vincent Leemans": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Bart Leten": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Steven Maes": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Liese Meyskens": ["B541","L544","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Rutger Moons": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Sven Van Buren": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Jakke Van den Broeck": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Kris Van Looveren": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "No√´l Van Roy": ["B541","L544","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Joris Van Vracem": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Cristoph Verhaegen": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"],
  "Robbe Vervecken": ["B541","L544","L549","A545","D541","M545","L545","T545","A541","Containers"],
  "Steven Vervloet": ["B541","L544","L549","A545","D541","M545","L545","T545","H541","A541","Containers"]
};

const oefenmomenten = {
  "B541":[1,2,3,4,5,6],
  "L544":[1,2,3,4],
  "L549":[1,2,3,4,5],
  "A545":[1,2,3,4,5,6],
  "D541":[1,2,3],
  "M545":[1,2,3,4],
  "L545":[1,2,3],
  "T545":[1,2,3,4,5,6],
  "H541":[1,2,3,4,5,6],
  "A541":[1,2,3,4,5,6],
  "Containers":[1]
};

// --- GROEPEN OMGEDRAAID ---
const currentDate = new Date();
const month = currentDate.getMonth()+1;
const isVoorjaar = month>=1 && month<=6;
const yearModulo = currentDate.getFullYear()%2;

const sortedChauffeurs = Object.keys(chauffeurs);
const mid = Math.ceil(sortedChauffeurs.length/2);

// Omgedraaide groepen
const groep1 = sortedChauffeurs.slice(mid);   // groep2 wordt nu groep1
const groep2 = sortedChauffeurs.slice(0,mid); // groep1 wordt nu groep2

const voorjaarG1 = ["B541","L544","L549","A545","D541","M545"];
const najaarG1 = ["T545","H541","A541","Containers"];
const voorjaarG2 = najaarG1;
const najaarG2 = voorjaarG1;

function getVoertuigenVoorChauffeur(chauffeur){
  if(groep1.includes(chauffeur)) 
    return isVoorjaar 
      ? (yearModulo===0?voorjaarG1:najaarG1) 
      : (yearModulo===0?najaarG1:voorjaarG1);
  else 
    return isVoorjaar 
      ? (yearModulo===0?voorjaarG2:najaarG2) 
      : (yearModulo===0?najaarG2:voorjaarG2);
}

// --- DOM & Render ---
const containerDiv = document.getElementById("chauffeurContainer");
const modal = document.getElementById("modal");
const modalText = document.getElementById("modalText");
const closeModal = document.querySelector(".close-modal");

closeModal.onclick = () => modal.style.display="none";
window.onclick = e => { if(e.target === modal) modal.style.display="none"; };

function renderChauffeurs(filter=""){
  filter = filter.toLowerCase();
  containerDiv.innerHTML="";
  for(let chauffeur of sortedChauffeurs){
    if(filter && !chauffeur.toLowerCase().includes(filter)) continue;
    const voertuigen = getVoertuigenVoorChauffeur(chauffeur);
    const card=document.createElement("div"); card.className="chauffeur-card";
    
    let totaal=0,voltooid=0;
    voertuigen.forEach(v=>totaal+=oefenmomenten[v].length);
    voertuigen.forEach(v=>oefenmomenten[v].forEach(n=>{if(localStorage.getItem(`${chauffeur}_${v}_${n}`)==="true")voltooid++;}));
    
    const h3=document.createElement("h3"); h3.textContent=chauffeur+" ";
    const counterSpan=document.createElement("span"); counterSpan.className="counter";
    counterSpan.textContent=`${voltooid} / ${totaal} oefenmomenten voltooid`;
    h3.appendChild(counterSpan); card.appendChild(h3);
    
    voertuigen.forEach(voertuig=>{
      const vehicleDiv=document.createElement("div"); vehicleDiv.className="vehicle";
      const vehHeader=document.createElement("div"); vehHeader.className="veh-header";
      vehHeader.innerHTML=`üöí ${voertuig} <button class="info-btn">‚ÑπÔ∏è</button>`;
      vehicleDiv.appendChild(vehHeader);
      
      const exerciseDiv=document.createElement("div"); exerciseDiv.className="exercise-list";
      oefenmomenten[voertuig].forEach(num=>{
        const label=document.createElement("label");
        const input=document.createElement("input");
        input.type="checkbox"; input.dataset.chauffeur=chauffeur; input.dataset.vehicle=voertuig; input.dataset.exercise=num;
        const key=`${chauffeur}_${voertuig}_${num}`;
        input.checked=localStorage.getItem(key)==="true";
        input.addEventListener("change",()=>{ localStorage.setItem(key,input.checked); renderChauffeurs(document.getElementById("searchInput").value); });
        label.appendChild(input); label.appendChild(document.createTextNode(` Oefenmoment ${num}`));
        exerciseDiv.appendChild(label);
      });
      vehicleDiv.appendChild(exerciseDiv);
      
      const infoBtn = vehHeader.querySelector(".info-btn");
      infoBtn.addEventListener("click",()=>{
        modalText.innerHTML=`<h4>${voertuig} oefenmomenten:</h4><ul>`+
        oefenUitleg[voertuig].map(x=>`<li>${x}</li>`).join('')+`</ul>`;
        modal.style.display="block";
      });
      card.appendChild(vehicleDiv);
    });
    containerDiv.appendChild(card);
  }
}

renderChauffeurs();
document.getElementById("searchInput").addEventListener("input",function(){
  renderChauffeurs(this.value);
});
</script>

<script src="/brandweerherentals/header.js"></script>
</body>
</html>
