<script>
document.addEventListener("DOMContentLoaded", () => {

const chauffeurs = [
 "Dries Boven","Robin Buyens","Bart Cools","Kurt Cools","Gianni Cornelis",
 "Roel Dekort","Rik Goris","Kris Hoeylaerts","Philippe Hoeylaerts","Vincent Leemans",
 "Bart Leten","Steven Maes","Liese Meyskens","Rutger Moons","Sven Van Buren",
 "Jakke Van den Broeck","Kris Van Looveren","NoÃ«l Van Roy","Joris Van Vracem",
 "Cristoph Verhaegen","Robbe Vervecken","Steven Vervloet"
];

const oefenmomenten = {
  "B541":[1,2,3,4,5,6],
  "L544":[1,2,3,4],
  "L549":[1,2,3,4,5],
  "A545":[1,2,3,4,5,6],
  "D541":[1,2,3],
  "M545":[1,2,3,4],
  "T545":[1,2,3,4,5,6],
  "H541":[1,2,3,4,5,6],
  "A541":[1,2,3,4,5,6],
  "Containers":[1]
};

const containerDiv = document.getElementById("chauffeurContainer");

function render() {
  containerDiv.innerHTML = "";

  chauffeurs.forEach(chauffeur => {

    const card = document.createElement("div");
    card.className = "chauffeur-card";

    const h3 = document.createElement("h3");
    const naamSpan = document.createElement("span");
    naamSpan.textContent = chauffeur;

    const counter = document.createElement("div");
    counter.className = "counter red";

    h3.appendChild(naamSpan);
    h3.appendChild(counter);
    card.appendChild(h3);

    let totaal = 0;
    let checked = 0;

    for (const voertuig in oefenmomenten) {

      const vDiv = document.createElement("div");
      vDiv.className = "vehicle";

      const vh = document.createElement("div");
      vh.className = "veh-header";
      vh.textContent = "ðŸš’ " + voertuig;
      vDiv.appendChild(vh);

      const lijst = document.createElement("div");
      lijst.className = "exercise-list";

      oefenmomenten[voertuig].forEach(nr => {
        totaal++;

        const label = document.createElement("label");
        const cb = document.createElement("input");
        cb.type = "checkbox";

        cb.addEventListener("change", ()=>{
          checked = card.querySelectorAll("input[type='checkbox']:checked").length;
          counter.textContent = `${checked} / ${totaal}`;

          counter.classList.remove("red","orange","green");
          if(checked === 0) counter.classList.add("red");
          else if(checked < totaal) counter.classList.add("orange");
          else counter.classList.add("green");
        });

        label.append(cb, `Moment ${nr}`);
        lijst.appendChild(label);
      });

      vDiv.appendChild(lijst);
      card.appendChild(vDiv);
    }

    counter.textContent = `0 / ${totaal}`;
    containerDiv.appendChild(card);
  });
}

render();

});
</script>
