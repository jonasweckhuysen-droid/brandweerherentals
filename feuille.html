<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Personeelsfeuille – Digitaal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="style.css">

<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
}

#formbox {
  background:#1a1a1a;
  max-width:800px;
  margin:20px auto;
  padding:20px;
  border-radius:12px;
}

label {display:block;margin-top:12px;}
input, textarea, select {
  width:100%;
  padding:8px;
  border-radius:6px;
  border:none;
  margin-top:4px;
}

.radio-group label {
  display:inline-block;
  margin-right:15px;
}

button {
  margin-top:20px;
  padding:10px 20px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}

#pdf-container {
  margin:30px auto;
  width:794px;
  background:white;
  padding:10px;
}
</style>
</head>
<body>

<div id="formbox">
  <h2>Personeelsfeuille – digitale invulling</h2>

  <label>Naam</label>
  <input id="naam" value="Jonas" readonly>

  <label>Datum</label>
  <input id="datum" type="text" placeholder="dd/mm/jjjj">

  <label>Begin - Einduur</label>
  <input id="uur" type="text" placeholder="vb. 08:00 - 16:00">

  <label>Omschrijving</label>
  <textarea id="omschrijving"></textarea>

  <label>Locatie</label>
  <input id="locatie" type="text">

  <label>Type opdracht (kies 1)</label>
  <div class="radio-group">
    <label><input type="radio" name="type" value="interventie"> Interventie</label>
    <label><input type="radio" name="type" value="ambulance"> Ambulance</label>
    <label><input type="radio" name="type" value="onderhoud"> Onderhoud / Dienstopdracht</label>
    <label><input type="radio" name="type" value="wacht"> Wacht / permanentie</label>
  </div>

  <button onclick="fillPdf()">Invullen in personeelsfeuille</button>
</div>

<div id="pdf-container">
  <canvas id="pdfCanvas"></canvas>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

<script>
const url = "personeelsfeuille.pdf";
const canvas = document.getElementById("pdfCanvas");
const ctx = canvas.getContext("2d");

let pdfPage;

const typeCoords = {
  interventie: {x:560, y:205},
  ambulance:   {x:600, y:205},
  onderhoud:   {x:640, y:205},
  wacht:       {x:680, y:205}
};

// PDF laden
pdfjsLib.getDocument(url).promise.then(pdf => {
  return pdf.getPage(1);
}).then(page => {
  pdfPage = page;
  const viewport = page.getViewport({scale:1.3});
  canvas.width = viewport.width;
  canvas.height = viewport.height;
  page.render({canvasContext:ctx, viewport:viewport});
});

function fillPdf() {

  pdfPage.render({
    canvasContext: ctx,
    viewport: pdfPage.getViewport({scale:1.3})
  }).promise.then(() => {

    const naam = document.getElementById("naam").value;
    const datum = document.getElementById("datum").value;
    const uur = document.getElementById("uur").value;
    const omschrijving = document.getElementById("omschrijving").value;
    const locatie = document.getElementById("locatie").value;

    const type = document.querySelector('input[name="type"]:checked')?.value;

    if(!type){
      alert("Kies eerst een type");
      return;
    }

    ctx.font = "11px Arial";
    ctx.fillStyle = "black";

    // ↓↓↓ HIER SCHRIJFT HIJ IN JE PDF ↓↓↓
    ctx.fillText(naam, 90, 150);
    ctx.fillText(datum, 90, 170);
    ctx.fillText(uur, 90, 190);
    ctx.fillText(omschrijving, 90, 215);
    ctx.fillText(locatie, 90, 245);

    // X plaatsen in juiste kolom
    const mark = typeCoords[type];
    ctx.font = "20px Arial";
    ctx.fillText("X", mark.x, mark.y);

  });
}
</script>

</body>
</html>
