<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kantine ‚Äî Brandweer Herentals</title>
<link rel="stylesheet" href="/brandweerherentals/kantine.css">
<meta name="theme-color" content="#c71f1f">
<style>
body { font-family: system-ui, sans-serif; margin:0; background:#fafafa; color:#222; }
header { background:#c71f1f; color:#fff; padding:15px; font-weight:700; text-align:center; position:relative; }
.back-link { position:absolute; left:15px; top:15px; color:#fff; text-decoration:none; font-weight:600; }
.container { max-width:800px; margin:0 auto; padding:20px; }
.product-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:15px; margin-top:10px; }
.product-card { background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); padding:10px; text-align:center; }
.product-card img { width:70px; height:70px; object-fit:contain; }
.controls { display:flex; justify-content:center; align-items:center; gap:10px; margin-top:8px; }
.controls button { background:#c71f1f; color:#fff; border:none; border-radius:6px; padding:4px 10px; cursor:pointer; font-size:16px; }
.controls button:hover { background:#a00; }
.cart ul { list-style:none; padding:0; margin:0; }
.cart li { display:flex; justify-content:space-between; padding:4px 0; border-bottom:1px solid #eee; }
#cartTotal { text-align:right; font-weight:700; margin-top:10px; font-size:16px; }
button#confirmOrder { margin-top:10px; background:#c71f1f; color:#fff; border:none; border-radius:8px; padding:10px 20px; font-weight:700; cursor:pointer; }
button#confirmOrder:disabled { background:#ccc; cursor:not-allowed; }
footer { margin-top:20px; text-align:center; color:#777; font-size:14px; }

/* overlay */
.overlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; justify-content:center; align-items:center; z-index:999; }
.overlay-content { background:#fff; border-radius:12px; padding:20px; width:90%; max-width:400px; box-shadow:0 4px 12px rgba(0,0,0,0.3); text-align:center; position:relative; }
.overlay-content h2 { margin-top:0; }
.overlay-content button { margin:6px; padding:10px 14px; border:none; border-radius:8px; cursor:pointer; font-weight:700; }
#payPayconiq { background:#00b0ff; color:#fff; }
#payCash { background:#ffbb00; color:#111; }
#payTransfer { background:#00c853; color:#fff; }
#closeOverlay { background:#ccc; color:#111; margin-top:10px; }
.notice { background:#e7f3ff; border:1px solid #90caf9; color:#0d47a1; padding:10px; border-radius:8px; margin-top:10px; }
</style>
</head>
<body>
<div class="container">
  <header>
    <a href="/brandweerherentals/" class="back-link">‚Üê Terug naar start</a>
    Kantine ‚Äî Bestelling
  </header>

  <main>
    <div class="product-grid" id="productGrid"></div>

    <div class="cart" id="cartSection">
      <h2>üßæ Jouw bestelling</h2>
      <ul id="cartList"><li>Geen producten geselecteerd.</li></ul>
      <div id="cartTotal"></div>
      <button id="confirmOrder" disabled>Bevestig bestelling</button>
    </div>
  </main>

  <footer>Brandweer Herentals ‚Äî Kantinebeheer</footer>
</div>

<div id="paymentOverlay" class="overlay">
  <div class="overlay-content">
    <h2>üí≥ Kies betaalmethode</h2>
    <p id="overlayTotal" style="font-weight:700;"></p>
    <button id="payPayconiq">üì≤ Payconiq</button>
    <button id="payCash">üí∂ Cash</button>
    <button id="payTransfer">üè¶ Bankoverschrijving</button>
    <div id="qrCode"></div>
    <div id="noticeMsg"></div>
    <button id="closeOverlay">Sluiten</button>
  </div>
</div>

<script>
const producten = [
  { naam:"Pintje", prijs:1.5, img:"/brandweerherentals/icons/drinks/beer.png" },
  { naam:"Cola", prijs:1.8, img:"/brandweerherentals/icons/drinks/cola.png" },
  { naam:"Fanta", prijs:1.8, img:"/brandweerherentals/icons/drinks/fanta.png" },
  { naam:"Water", prijs:1.0, img:"/brandweerherentals/icons/drinks/water.png" },
  { naam:"Koffie", prijs:1.2, img:"/brandweerherentals/icons/drinks/coffee.png" },
  { naam:"Chips", prijs:1.5, img:"/brandweerherentals/icons/drinks/chips.png" }
];

const grid=document.getElementById("productGrid");
const cartList=document.getElementById("cartList");
const cartTotal=document.getElementById("cartTotal");
const confirmBtn=document.getElementById("confirmOrder");
let cart={};

// producten tonen
producten.forEach(p=>{
  const card=document.createElement("div");
  card.className="product-card";
  card.innerHTML=`
    <img src="${p.img}" alt="${p.naam}">
    <h3>${p.naam}</h3>
    <p>‚Ç¨${p.prijs.toFixed(2)}</p>
    <div class="controls">
      <button class="minus">‚àí</button>
      <span>0</span>
      <button class="plus">+</button>
    </div>`;
  const countEl=card.querySelector("span");
  card.querySelector(".plus").onclick=()=>{ cart[p.naam]=(cart[p.naam]||0)+1; countEl.textContent=cart[p.naam]; updateCart(); };
  card.querySelector(".minus").onclick=()=>{ if(cart[p.naam]){ cart[p.naam]--; if(cart[p.naam]<=0) delete cart[p.naam]; countEl.textContent=cart[p.naam]||0; updateCart(); } };
  grid.appendChild(card);
});

function updateCart(){
  cartList.innerHTML="";
  let totaal=0;
  for(const [naam,aantal] of Object.entries(cart)){
    const p=producten.find(x=>x.naam===naam);
    const subt=p.prijs*aantal;
    totaal+=subt;
    const li=document.createElement("li");
    li.innerHTML=`${aantal} √ó ${naam} <span>‚Ç¨${subt.toFixed(2)}</span>`;
    cartList.appendChild(li);
  }
  if(totaal===0){
    cartList.innerHTML="<li>Geen producten geselecteerd.</li>";
    cartTotal.textContent="";
    confirmBtn.disabled=true;
  }else{
    cartTotal.textContent=`üí∞ Totaal te betalen: ‚Ç¨${totaal.toFixed(2)}`;
    confirmBtn.disabled=false;
  }
}

confirmBtn.onclick=()=>{
  if(!Object.keys(cart).length) return;
  const totaal=Object.entries(cart).reduce((sum,[naam,aantal])=>{
    const p=producten.find(x=>x.naam===naam); return sum+p.prijs*aantal;
  },0);
  document.getElementById("paymentOverlay").style.display="flex";
  document.getElementById("overlayTotal").textContent=`Totaal: ‚Ç¨${totaal.toFixed(2)}`;
  const IBAN="BE12345678901234";
  const mededeling="Kantine Brandweer Herentals";
  const qrData=`BCD\n002\n1\nSCT\n\n${IBAN}\n\n\n${totaal.toFixed(2)}\nEUR\n${mededeling}`;
  const qrURL=`https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl=${encodeURIComponent(qrData)}`;
  document.getElementById("qrCode").innerHTML=`
    <img src="${qrURL}" alt="QR Betaling" style="margin-top:10px;border:1px solid #ccc;border-radius:8px;">
    <div style="margin-top:6px;">Scan met je bank-app om te betalen</div>`;
  cart={}; updateCart();
};

// betaalopties
document.getElementById("payPayconiq").onclick=()=>{
  const totaal=document.getElementById("overlayTotal").textContent;
  document.getElementById("noticeMsg").innerHTML=`<div class="notice">üì≤ Open je Payconiq-app en betaal het bedrag.<br>${totaal}</div>`;
};
document.getElementById("payCash").onclick=()=>{
  const totaal=document.getElementById("overlayTotal").textContent;
  document.getElementById("noticeMsg").innerHTML=`<div class="notice">üí∂ Cash ontvangen.<br>${totaal}</div>`;
};
document.getElementById("payTransfer").onclick=()=>{
  const totaal=document.getElementById("overlayTotal").textContent;
  document.getElementById("noticeMsg").innerHTML=`<div class="notice">üè¶ Maak een overschrijving naar:<br><strong>IBAN:</strong> BE12345678901234<br><strong>Mededeling:</strong> Kantine Brandweer Herentals<br>${totaal}</div>`;
};
document.getElementById("closeOverlay").onclick=()=>{
  document.getElementById("paymentOverlay").style.display="none";
  document.getElementById("noticeMsg").innerHTML="";
};
</script>
</body>
</html>
