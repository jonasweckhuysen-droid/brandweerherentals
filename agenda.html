<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Agenda — Brandweer Herentals</title>
<link rel="manifest" href="/brandweerherentals/manifest.json">
<meta name="theme-color" content="#c71f1f">
<style>
:root {
  --red: #c71f1f;
  --dark: #111;
  --light: #fff;
  --muted: #f6f6f6;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
html, body { margin:0; padding:0; height:100%; }
body { background: linear-gradient(180deg, #fff 0%, #f8f8f8 100%); display:flex; justify-content:center; padding:20px; -webkit-font-smoothing:antialiased; }
.container { width:100%; max-width:780px; background: var(--light); border-radius:18px; border:4px solid var(--red); box-shadow:0 8px 30px rgba(0,0,0,0.08); overflow:hidden; }
header { display:flex; align-items:center; gap:12px; padding:18px; background: linear-gradient(90deg, var(--red), #8f1515); color: var(--light); }
header .logo { width:52px; height:52px; border-radius:10px; background: rgba(255,255,255,0.08); display:flex; align-items:center; justify-content:center; font-weight:700; font-size:20px; }
header h1 { margin:0; font-size:18px; }
header p { margin:0; font-size:12px; opacity:0.9; }
.content { padding:18px; }
.event { background: var(--muted); border-radius:12px; padding:14px; margin-bottom:12px; display:flex; flex-direction:column; gap:6px; }
.event-date { font-weight:700; color:var(--red); font-size:15px; }
.event-title { font-size:16px; font-weight:600; }
.event-desc { font-size:14px; opacity:0.8; }
footer { padding:12px 18px; font-size:13px; color:#444; background:#fff; border-top:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
a.back { display:inline-block; color:var(--red); font-weight:700; text-decoration:none; margin-bottom:12px; }
</style>
</head>
<body>
<div class="container" role="application" aria-label="Agenda Herentals">
  <header>
    <div class="logo" aria-hidden="true">BWH</div>
    <div>
      <h1>Agenda</h1>
      <p>Brandweer Kalender</p>
    </div>
  </header>
  <main class="content">
    <a href="/brandweerherentals/" class="back">← Terug naar start</a>
    <div id="agendaList">Laden…</div>
  </main>
  <footer>
    <div class="small">Versie 1.3 —</div>
    <div class="small">Laatste update: <span id="today"></span></div>
  </footer>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("today").textContent = new Date().toLocaleDateString("nl-BE", { weekday:"long", year:"numeric", month:"long", day:"numeric" });

  async function loadAgenda() {
    const list = document.getElementById("agendaList");
    try {
      const res = await fetch('/brandweerherentals/agenda.php');
      if (!res.ok) throw new Error("Netwerkfout");
      const events = await res.json();
      if (!events.length) { list.innerHTML = "<p>Geen aankomende evenementen.</p>"; return; }
      list.innerHTML = "";
      events.forEach(ev => {
        const startDate = new Date(ev.start);
        const dateStr = startDate.toLocaleDateString("nl-BE", { weekday:"short", day:"2-digit", month:"short", hour:"2-digit", minute:"2-digit" });
        const el = document.createElement("div");
        el.className = "event";
        el.innerHTML = `<div class="event-date">${dateStr}</div><div class="event-title">${ev.summary}</div><div class="event-desc">${ev.description || ""}</div>`;
        list.appendChild(el);
      });
    } catch(err) {
      console.warn("Kon agenda niet laden:", err);
      list.innerHTML = "<p>Kon agenda niet laden.</p>";
    }
  }

  loadAgenda();
  setInterval(loadAgenda, 15*60*1000);
});
</script>
</body>
</html>
