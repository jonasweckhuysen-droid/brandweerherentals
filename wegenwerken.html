<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Brandweer Herentals ‚Äî Wegenwerken</title>

<!-- Manifest & thema -->
<link rel="manifest" href="/brandweerherentals/manifest.json">
<meta name="theme-color" content="#c71f1f">

<!-- Centrale CSS -->
<link rel="stylesheet" href="/brandweerherentals/style.css">

<style>
/* ==============================
   WEGENWERKEN SPECIFIEK
============================== */
.werken-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 10px;
}

.event-card {
  background: #fff;
  border-left: 6px solid #c71f1f;
  padding: 12px 16px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  transition: transform 0.1s;
}

.event-card:hover {
  transform: translateY(-2px);
}

.event-date {
  font-weight: 700;
  color: #c71f1f;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.event-date::before {
  content: "üöß";
  display: inline-block;
}

.event-title {
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 4px;
}

.event-desc {
  font-size: 13px;
  color: #333;
}

@media (max-width: 600px) {
  .event-card {
    padding: 10px 12px;
  }
  .event-title {
    font-size: 14px;
  }
  .event-desc {
    font-size: 12px;
  }
}
</style>
</head>

<body>
<div class="container" role="application" aria-label="Fire Crew Herentals portal">

  <!-- -----------------------------------
       HEADER
  ------------------------------------ -->
  <header>
    <div class="header-left">
      <div class="logo" aria-hidden="true">BWH</div>
      <div>
        <h1>Wegenwerken</h1>
        <p>Actuele werken in Herentals</p>
      </div>
    </div>
    <div id="header-right">
      <div id="greeting"></div>
      <div id="datetime"></div>
      <div id="ploegOfWeek"></div>
    </div>
  </header>

  <!-- -----------------------------------
       CONTENT
  ------------------------------------ -->
  <main class="content">
    <a href="/brandweerherentals/" class="backlink">‚Üê Terug naar start</a>
    <div id="werkenList" class="werken-list">Laden‚Ä¶</div>
  </main>

  <!-- -----------------------------------
       FOOTER
  ------------------------------------ -->
  <footer>
    <div class="small">Versie 1.1 ‚Äî</div>
    <div class="small">Laatste update: <span id="today"></span></div>
  </footer>
</div>

<script>
  // Toon huidige datum in footer
  document.getElementById("today").textContent = new Date().toLocaleDateString("nl-BE", {
    weekday:"long", year:"numeric", month:"long", day:"numeric"
  });

  // Render werken
  function renderWorks(works) {
    const list = document.getElementById("werkenList");
    const now = new Date();

    const upcoming = works.filter(w => new Date(w.end) >= now)
                          .sort((a,b) => new Date(a.start) - new Date(b.start));

    if (upcoming.length === 0) {
      list.innerHTML = "<p>Geen aankomende werken.</p>";
      return;
    }

    list.innerHTML = "";
    upcoming.forEach(w => {
      const start = new Date(w.start).toLocaleDateString("nl-BE", { weekday:"short", day:"2-digit", month:"short" });
      const end = new Date(w.end).toLocaleDateString("nl-BE", { weekday:"short", day:"2-digit", month:"short" });
      const el = document.createElement("div");
      el.className = "event-card";
      el.innerHTML = `
        <div class="event-date">${start}${start !== end ? " ‚Äì " + end : ""}</div>
        <div class="event-title">${w.location}</div>
        <div class="event-desc">${w.info}</div>
      `;
      list.appendChild(el);
    });
  }

  // Fetch JSON en render
  function loadWorks() {
    fetch("/brandweerherentals/werken.json?_=" + new Date().getTime()) // cache-busting
      .then(r => r.json())
      .then(renderWorks)
      .catch(err => {
        console.error("Fout bij laden wegenwerken:", err);
        document.getElementById("werkenList").innerHTML = "<p>Kon data niet laden.</p>";
      });
  }

  loadWorks();
  setInterval(loadWorks, 60000);
</script>

<!-- Header.js voor greeting, datetime & ploeg -->
<script src="/brandweerherentals/header.js"></script>
</body>
</html>
