<!doctype html>

<html lang="nl">  
<head>  
<meta charset="utf-8">  
<meta name="viewport" content="width=device-width, initial-scale=1">  
<title>Brandweer Herentals ‚Äî Portal</title>  <!-- PWA -->  <link rel="manifest" href="/brandweerherentals/manifest.json">  
<meta name="theme-color" content="#c71f1f">  <!-- Centrale layout -->  <link rel="stylesheet" href="style.css">  <style>  
/* Overlay grafisch menu */  
#welcomeOverlay {  
  position: fixed;  
  top:0; left:0; width:100%; height:100%;  
  background: rgba(0,0,0,0.85);  
  display:flex; justify-content:center; align-items:center;  
  z-index:9999; flex-direction:column; padding:20px;  
  color:#fff; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;  
}  
  
#welcomeOverlay h2 {  
  font-size: 1.8rem; margin-bottom: 16px;  
  text-align:center; color: var(--red);  
}  
  
#welcomeOverlay .input-group {  
  display:flex; flex-direction:column; gap:12px; margin-bottom: 20px; width:100%; max-width:320px;  
}  
  
#welcomeOverlay label {  
  display:flex; align-items:center; gap:10px;  
  cursor:pointer; background: #fff1f1; padding:10px 12px; border-radius:10px; color: #111;  
  transition: all 0.15s;  
}  
  
#welcomeOverlay label:hover {  
  background: var(--red); color:#fff;  
}  
  
#welcomeOverlay input[type=text] { flex:1; padding:8px; border-radius:6px; border:none; font-size:1rem; }  
  
#welcomeOverlay input[type=checkbox] { width:20px; height:20px; }  
  
#welcomeOverlay button {  
  padding: 12px 20px; border:none; border-radius:10px;  
  background: var(--red); color:#fff; font-weight:700; font-size:1rem;  
  cursor:pointer; transition: all 0.15s;  
}  
  
#welcomeOverlay button:hover { background: var(--red-dark); }  
</style>  </head>  
<body>  <div class="container" role="application" aria-label="Brandweer Herentals portal">    <!-- HEADER -->    <header id="appHeader">  
    <div class="header-left">  
      <img src="/brandweerherentals/icons/logo.png" alt="Brandweer Herentals" class="header-logo">  
    </div>  
    <div class="header-right">  
      <div id="greeting" class="header-greeting"></div>  
      <div id="datetime" class="header-datetime"></div>  
      <div id="ploegOfWeek" class="header-ploeg"></div>  
    </div>  
  </header>    <!-- CONTENT -->    <main class="content">  
    <div class="grid" id="buttonGrid" aria-live="polite"></div>  <!-- Install PWA prompt -->  
<div id="installPrompt" class="overlay" style="display:none;">  
  <div class="overlay-content" role="dialog" aria-modal="true">  
    <span id="installText">üì≤ Voeg de app toe aan je startscherm</span>  
    <button id="installNow">Toevoegen</button>  
    <span class="close" id="installClose">‚úñ</span>  
  </div>  
</div>

  </main>    <footer>  
    <div>Versie 1.1</div>  
    <div></div>  
  </footer>  
</div>  <!-- ================================ -->  <script>  
// =====================================  
// üåü Variabelen  
// =====================================  
let links = {  
  abiweb: { title:"Abiweb", icon:"/brandweerherentals/icons/buttons/abiweb.png", desc:"Oefeningen en prestaties", url:"https://identity.brandweerzonekempen.be/Identity/Account/Login?ReturnUrl=%2Fconnect%2Fauthorize%3Fclient_id%3Dabiweb.client.new" },  
  agenda: { title:"Agenda", icon:"üìÖ", desc:"Belangrijke data en evenementen", url:"/brandweerherentals/agenda.html" },  
  defect: { title:"Defectmelding", icon:"üîß", desc:"Meld defecten", url:"/brandweerherentals/defectmelding.html" },  
  kantine: { title:"Kantine", icon:"üçª", desc:"Bestellen & betalen", url:"/brandweerherentals/kantine.html" },  
  logistiek: { title:"Logistiek", icon:"/brandweerherentals/icons/buttons/winkelkar.png", desc:"Transport aanvragen", url:"https://form.jotform.com/230682691731055" },  
  order: { title:"Bestelling", icon:"üì¶", desc:"Materiaal bestellen", url:"https://forms.cloud.microsoft/e/GjHr1Kym0w" },  
  vehicle: { title:"Voertuigreservatie", icon:"üöí", desc:"Controle & reservatie", url:"https://forms.cloud.microsoft/Pages/ResponsePage.aspx?id=ex_6l868RE6S2t-IkEL0dqocXptaGhNPlV-vS_rmuEtUN0JBTzkySTI0STFZUlk4Q01GOVRTR1UzMy4u" },  
  verdi: { title:"Verdi", icon:"/brandweerherentals/icons/buttons/verdi.png", desc:"Oproepen", url:"https://kempen.verdi.cloud/" },  
  wegenwerken: { title:"Wegenwerken", icon:"üöß", desc:"Actuele info", url:"/brandweerherentals/wegenwerken.html" },  
  wespen: { title:"Wespen", icon:"üêù", desc:"Ploeg van dienst", url:"/brandweerherentals/wespen.html" }  
};  
  
// =====================================  
// üåü Overlay HTML  
// =====================================  
document.body.insertAdjacentHTML('beforeend', `  
<div id="welcomeOverlay" style="display:none;">  
  <h2>Welkom bij Brandweer Herentals</h2>  
  <div class="input-group">  
    <input type="text" id="userNameInput" placeholder="Vul je naam in">  
  </div>  
  <div class="input-group">  
    <label><input type="checkbox" value="brandweer"> Brandweer</label>  
    <label><input type="checkbox" value="ambulancier"> Ambulancier</label>  
    <label><input type="checkbox" value="chauffeur"> Chauffeur</label>  
    <label><input type="checkbox" value="duiker"> Duiker</label>  
    <label><input type="checkbox" value="firecrew"> VZW Firecrew</label>  
  </div>  
  <div class="input-group" id="vzwPwdGroup" style="display:none;">  
    <input type="text" id="vzwPwdInput" placeholder="VZW wachtwoord">  
  </div>  
  <button id="confirmBtn">Bevestig</button>  
</div>  
`);  
  
const overlay = document.getElementById("welcomeOverlay");  
const confirmBtn = document.getElementById("confirmBtn");  
const userNameInput = document.getElementById("userNameInput");  
const vzwPwdInput = document.getElementById("vzwPwdInput");  
const vzwPwdGroup = document.getElementById("vzwPwdGroup");  
  
// =====================================  
// üåü Eenmalige overlay tonen  
// =====================================  
window.addEventListener("DOMContentLoaded", () => {  
  const savedName = localStorage.getItem("userName");  
  const savedSpec = JSON.parse(localStorage.getItem("specialiteiten") || "[]");  
  
  if (savedName && savedSpec.length > 0) {  
    document.getElementById("greeting").textContent = `Welkom, ${savedName}!`;  
    addSpecialLinks(savedSpec);  
    renderGrid();  
  } else {  
    overlay.style.display = "flex";  
  }  
});  
  
// =====================================  
// üåü Toon wachtwoord veld bij VZW  
// =====================================  
document.querySelectorAll('#welcomeOverlay input[type=checkbox]').forEach(cb => {  
  cb.addEventListener('change', () => {  
    if (cb.value === 'firecrew') {  
      vzwPwdGroup.style.display = cb.checked ? 'block' : 'none';  
    }  
  });  
});  
  
// =====================================  
// üåü Confirm knop  
// =====================================  
confirmBtn.addEventListener("click", () => {  
  const name = userNameInput.value.trim();  
  const selectedSpecs = Array.from(document.querySelectorAll('#welcomeOverlay input[type=checkbox]:checked')).map(i => i.value);  
  
  if (!name) { alert("Vul je naam in."); return; }  
  if (selectedSpecs.includes("firecrew") && vzwPwdInput.value !== "Oudstrijder") {  
    alert("Ongeldig VZW-wachtwoord."); return;  
  }  
  
  localStorage.setItem("userName", name);  
  localStorage.setItem("specialiteiten", JSON.stringify(selectedSpecs));  
  
  document.getElementById("greeting").textContent = `Welkom, ${name}!`;  
  overlay.style.display = "none";  
  
  addSpecialLinks(selectedSpecs);  
  renderGrid();  
});  
  
// =====================================  
// üåü Functies  
// =====================================  
function addSpecialLinks(specs) {  
  specs.forEach(spec => {  
    if (spec !== "brandweer") {  
      if (spec === "ambulancier") links.ambulance = { title:"Ambulance", icon:"üöë", desc:"Toegang Ambulance", url:"https://dgh.brandweerzonekempen.be/" };  
      if (spec === "chauffeur") links.chauffeur = { title:"Chauffeur", icon:"üöõ", desc:"Toegang Chauffeur", url:"/brandweerherentals/chauffeur.html" };  
      if (spec === "duiker") links.duiker = { title:"Duiker", icon:"ü§ø", desc:"Toegang Duiker", url:"/brandweerherentals/duiker.html" };  
      if (spec === "firecrew") links.firecrew = { title:"Firecrew", icon:"üî•", desc:"Exclusief", url:"/brandweerherentals/firecrew.html" };  
    }  
  });  
}  
  
function renderGrid() {  
  const grid = document.getElementById("buttonGrid");  
  grid.innerHTML = "";  
  Object.values(links).sort((a,b)=>a.title.localeCompare(b.title,"nl")).forEach(item => {  
    const a = document.createElement("a");  
    a.className = "btn";  
    a.href = item.url;  
    a.innerHTML = `  
      <div class="icon">${item.icon.endsWith(".png")? `<img src="${item.icon}" alt="${item.title}">`:item.icon}</div>  
      <div>  
        <div>${item.title}</div>  
        <small>${item.desc}</small>  
      </div>  
    `;  
    grid.appendChild(a);  
  });  
}  
  
// =====================================  
// üì≤ PWA INSTALL PROMPT  
// =====================================  
let deferredPrompt;  
const installPrompt = document.getElementById("installPrompt");  
const installBtn = document.getElementById("installNow");  
const installClose = document.getElementById("installClose");  
  
window.addEventListener("beforeinstallprompt", e => {  
  e.preventDefault();  
  deferredPrompt = e;  
  installPrompt.style.display = "flex";  
});  
  
installBtn.addEventListener("click", async () => {  
  const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);  
  if (isIOS) { alert("Op iPhone/iPad: gebruik ‚ÄòZet op beginscherm‚Äô."); installPrompt.style.display="none"; return; }  
  if (deferredPrompt) {  
    deferredPrompt.prompt();  
    const result = await deferredPrompt.userChoice;  
    if(result.outcome==="accepted") localStorage.setItem("appInstalled","true");  
    installPrompt.style.display="none";  
  }  
});  
  
installClose.addEventListener("click", ()=>installPrompt.style.display="none");  
  
</script>  <script src="/brandweerherentals/header.js"></script>  </body>  
</html>  
