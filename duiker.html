<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Duiker — Brandweer Herentals</title>

<link rel="stylesheet" href="style.css">

<style>
.duiker-lijst {
  margin-top: 25px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.duiker-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 15px;
  background: #111;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.5);
  color: white;
}

.duiker-naam {
  font-weight: bold;
}

.duiker-functie {
  font-size: 0.9em;
  opacity: 0.7;
}

.status {
  padding: 6px 12px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.status.aanwezig {
  background: #2ecc71;
  color: white;
}

.status.afwezig {
  background: #e74c3c;
  color: white;
}

.status.onbekend {
  background: #7f8c8d;
  color: white;
}

</style>
</head>
<body>

<div class="container">

<header id="appHeader">
  <div class="header-left">
    <img src="/brandweerherentals/icons/logo.png" alt="Brandweer Herentals" class="header-logo">
  </div>
  <div class="header-right">
    <div id="greeting" class="header-greeting"></div>
    <div id="datetime" class="header-datetime"></div>
    <div id="ploegOfWeek" class="header-ploeg"></div>
  </div>
</header>

<main>
  <h2>Duiker Module – Aanwezigheid</h2>
  <p>Duid per persoon aan of hij beschikbaar is voor de komende duik.</p>

  <div class="duiker-lijst" id="duikerLijst"></div>

  <a href="index.html" class="backlink">← Terug naar menu</a>
</main>

<footer>
  <div>Brandweer Herentals</div>
</footer>

<script src="/brandweerherentals/header.js"></script>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ============================================
// FIREBASE CONFIG (die je doorgaf)
// ============================================
const firebaseConfig = {
  apiKey: "AIzaSyAUkFsXiJ7MOIDFfC0AUk9DiT_BPIHzfEE",
  authDomain: "post-herentals.firebaseapp.com",
  databaseURL: "https://post-herentals-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "post-herentals",
  storageBucket: "post-herentals.firebasestorage.app",
  messagingSenderId: "762725561089",
  appId: "1:762725561089:web:38c46cc8cf44d624252100",
  measurementId: "G-C2FWECFEQX"
};

firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ============================================
// DUIKTEAM
// ============================================
const duikers = [
  { naam: "Bart Boons", functie: "Duiker" },
  { naam: "Jef Leysen", functie: "Duiker" },
  { naam: "Wannes Verhegge", functie: "Duiker" },
  { naam: "Jonas Weckhuysen", functie: "Duiker" },
  { naam: "Danny Van den Bergh", functie: "Assistent" },
  { naam: "Patrick Van Hove", functie: "Assistent" },
  { naam: "Alain Leemans", functie: "Assistent" },
  { naam: "Kurt Cools", functie: "Assistent" },
  { naam: "Pedro Wallyn", functie: "Assistent" }
];

// ============================================
// STATUS WIJZIGEN
// ============================================
function toggleStatus(naam, huidigeStatus) {
  const nieuweStatus = (huidigeStatus === "Aanwezig") ? "Afwezig" : "Aanwezig";

  database.ref("duikers/" + naam).set({
    status: nieuweStatus,
    timestamp: Date.now()
  });
}

// ============================================
// DUIKERS TONEN
// ============================================
function laadDuikers() {
  const lijst = document.getElementById("duikerLijst");
  lijst.innerHTML = "";

  duikers.forEach(duiker => {
    const ref = database.ref("duikers/" + duiker.naam);

    ref.on("value", snapshot => {
      const data = snapshot.val();
      let status = data ? data.status : "Onbekend";

      const oude = document.getElementById(duiker.naam);
      if (oude) oude.remove();

      const card = document.createElement("div");
      card.className = "duiker-card";
      card.id = duiker.naam;

      const info = document.createElement("div");
      info.innerHTML = `
        <div class="duiker-naam">${duiker.naam}</div>
        <div class="duiker-functie">${duiker.functie}</div>
      `;

      const btn = document.createElement("button");
      btn.className = "status " + 
        (status === "Aanwezig" ? "aanwezig" : 
         status === "Afwezig" ? "afwezig" : "onbekend");

      btn.innerText = status;
      btn.onclick = () => toggleStatus(duiker.naam, status);

      card.appendChild(info);
      card.appendChild(btn);

      lijst.appendChild(card);
    });
  });
}

laadDuikers();

</script>

</div>
</body>
</html>
